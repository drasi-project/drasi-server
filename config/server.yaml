id: 557a4f2d-d472-4081-869e-85ffa08713fc
host: 0.0.0.0
port: 8080
logLevel: debug
persistConfig: true
persistIndex: false
sources:
- kind: mock
  id: sensor-data
  autoStart: true
  dataType: sensor
  intervalMs: 2000
- kind: postgres
  id: app-database
  autoStart: true
  bootstrapProvider:
    kind: postgres
    host:
      kind: EnvironmentVariable
      name: POSTGRES_HOST
      default: localhost
    port: 5432
    database:
      kind: EnvironmentVariable
      name: POSTGRES_DB
      default: myapp
    user:
      kind: EnvironmentVariable
      name: POSTGRES_USER
      default: drasi_user
    password:
      kind: EnvironmentVariable
      name: POSTGRES_PASSWORD
      default: drasi_password
    tables: []
    slotName: drasi_slot
    publicationName: drasi_publication
    sslMode: prefer
    tableKeys: []
  host:
    kind: EnvironmentVariable
    name: POSTGRES_HOST
    default: localhost
  port: 5432
  database:
    kind: EnvironmentVariable
    name: POSTGRES_DB
    default: myapp
  user:
    kind: EnvironmentVariable
    name: POSTGRES_USER
    default: drasi_user
  password:
    kind: EnvironmentVariable
    name: POSTGRES_PASSWORD
    default: drasi_password
  tables:
  - users
  - orders
  - products
  slotName: drasi_cdc_slot
  publicationName: drasi_cdc_publication
  sslMode: prefer
  tableKeys:
  - table: users
    keyColumns:
    - id
  - table: orders
    keyColumns:
    - order_id
  - table: products
    keyColumns:
    - sku
- kind: postgres
  id: daniel-test3
  autoStart: true
  bootstrapProvider:
    kind: postgres
    host: localhost
    port: 5432
    database: test
    user: postgres
    password: test
    tables: []
    slotName: drasi_slot
    publicationName: drasi_publication
    sslMode: prefer
    tableKeys: []
  host: localhost
  port: 5432
  database: test
  user: postgres
  password: test
  tables:
  - Freezer
  slotName: daniel_test_slot
  publicationName: rg_daniel_test3
  sslMode: prefer
  tableKeys:
  - table: Freezer
    keyColumns:
    - id
- kind: postgres
  id: postgres-messages
  autoStart: true
  bootstrapProvider:
    kind: postgres
    host:
      kind: EnvironmentVariable
      name: POSTGRES_HOST
      default: localhost
    port:
      kind: EnvironmentVariable
      name: POSTGRES_PORT
      default: '5432'
    database:
      kind: EnvironmentVariable
      name: POSTGRES_DATABASE
      default: getting_started
    user:
      kind: EnvironmentVariable
      name: POSTGRES_USER
      default: drasi_user
    password: drasi_password
    tables: []
    slotName: drasi_slot
    publicationName: drasi_publication
    sslMode: prefer
    tableKeys: []
  host:
    kind: EnvironmentVariable
    name: POSTGRES_HOST
    default: localhost
  port:
    kind: EnvironmentVariable
    name: POSTGRES_PORT
    default: '5432'
  database:
    kind: EnvironmentVariable
    name: POSTGRES_DATABASE
    default: getting_started
  user:
    kind: EnvironmentVariable
    name: POSTGRES_USER
    default: drasi_user
  password: drasi_password
  tables:
  - message
  slotName: drasi_getting_started_slot_2
  publicationName: drasi_getting_started_pub
  sslMode: prefer
  tableKeys:
  - table: message
    keyColumns:
    - messageid
queries:
- id: hello-world-from
  autoStart: true
  query: |
    MATCH (m:message {message: 'Hello World'})
    RETURN m.messageid AS MessageId, m.from AS MessageFrom
  queryLanguage: Cypher
  middleware: []
  sources:
  - sourceId: postgres-messages
    nodes: []
    relations: []
    pipeline: []
  enableBootstrap: true
  bootstrapBufferSize: 10000
- id: message-count
  autoStart: true
  query: |
    MATCH (m:message)
    RETURN m.message AS Message, count(m) AS Frequency
  queryLanguage: Cypher
  middleware: []
  sources:
  - sourceId: postgres-messages
    nodes: []
    relations: []
    pipeline: []
  enableBootstrap: true
  bootstrapBufferSize: 10000
reactions:
- kind: log
  id: log-all-queries
  queries:
  - hello-world-from
  - message-count
  autoStart: true
  routes: {}
  defaultTemplate:
    added:
      template: '[{{query_name}}] + {{after}}'
    updated:
      template: '[{{query_name}}] ~ {{before}} -> {{after}}'
    deleted:
      template: '[{{query_name}}] - {{before}}'
instances: []
