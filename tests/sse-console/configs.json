{
  "price-ticker": {
    "name": "price-ticker",
    "description": "Simple price ticker for all stocks",
    "server": "http://localhost:8080",
    "queries": [
      {
        "id": "price-ticker-query",
        "query": "MATCH (sp:stock_prices) RETURN sp.symbol AS symbol, sp.price AS price, sp.previous_close AS previous_close, ((sp.price - sp.previous_close) / sp.previous_close * 100) AS change_percent",
        "sources": ["price-feed"],
        "auto_start": true
      }
    ],
    "reaction": {
      "id": "sse-ticker-reaction",
      "reaction_type": "sse",
      "properties": {
        "host": "0.0.0.0",
        "port": 50051,
        "sse_path": "/events",
        "heartbeat_interval_ms": 15000
      },
      "auto_start": true
    }
  },
  "portfolio": {
    "name": "portfolio",
    "description": "Portfolio tracking with synthetic joins",
    "server": "http://localhost:8080",
    "queries": [
      {
        "id": "portfolio-stocks-query",
        "query": "MATCH (s:stocks) WHERE s.symbol IN ['AAPL', 'MSFT', 'GOOGL', 'TSLA', 'NVDA'] RETURN s.symbol AS symbol, s.name AS name, s.sector AS sector",
        "sources": ["postgres-stocks"],
        "auto_start": true
      },
      {
        "id": "portfolio-prices-query",
        "query": "MATCH (sp:stock_prices) WHERE sp.symbol IN ['AAPL', 'MSFT', 'GOOGL', 'TSLA', 'NVDA'] RETURN sp.symbol AS symbol, sp.price AS price, sp.previous_close AS previous_close, sp.volume AS volume",
        "sources": ["price-feed"],
        "auto_start": true
      }, 
      {
        "id": "portfolio-portfolio-query",
        "query": "MATCH (p:portfolio) RETURN p.user_id AS owner, p.symbol AS symbol, p.quantity AS quantity, p.purchase_price AS purchase_price",
        "sources": ["postgres-stocks"],
        "joins": [],
        "auto_start": true
      },      
      {
        "id": "portfolio-owns-query",
        "query": "MATCH (p:portfolio)-[:OWNS_STOCK]->(s:stocks) RETURN p.symbol AS symbol, s.name AS name, p.quantity AS quantity, p.purchase_price AS purchase_price",
        "sources": ["postgres-stocks"],
        "joins": [
          {
            "id": "OWNS_STOCK",
            "keys": [
              { "label": "portfolio", "property": "symbol" },
              { "label": "stocks", "property": "symbol" }
            ]
          }
        ],
        "auto_start": true
      },
      {
        "id": "portfolio-portfolio-prices-query",
        "query": "MATCH (p:portfolio)-[:HAS_PRICE]->(sp:stock_prices) RETURN p.symbol AS symbol, p.quantity AS quantity, p.purchase_price AS purchase_price, sp.price AS current_price",
        "sources": ["postgres-stocks", "price-feed"],
        "joins": [
          {
            "id": "HAS_PRICE",
            "keys": [
              { "label": "portfolio", "property": "symbol" },
              { "label": "stock_prices", "property": "symbol" }
            ]
          }
        ],
        "auto_start": true
      },
      {
        "id": "portfolio-query",
        "query": "MATCH (p:portfolio)-[:OWNS_STOCK]->(s:stocks)-[:HAS_PRICE]->(sp:stock_prices) RETURN p.symbol AS symbol, s.name AS name, p.quantity AS quantity, p.purchase_price AS purchase_price, sp.price AS current_price, (sp.price * p.quantity) AS current_value, (p.purchase_price * p.quantity) AS cost_basis, ((sp.price - p.purchase_price) * p.quantity) AS profit_loss, ((sp.price - p.purchase_price) / p.purchase_price * 100) AS profit_loss_percent",
        "sources": ["postgres-stocks", "price-feed"],
        "joins": [
          {
            "id": "OWNS_STOCK",
            "keys": [
              { "label": "portfolio", "property": "symbol" },
              { "label": "stocks", "property": "symbol" }
            ]
          },
          {
            "id": "HAS_PRICE",
            "keys": [
              { "label": "stocks", "property": "symbol" },
              { "label": "stock_prices", "property": "symbol" }
            ]
          }
        ],
        "auto_start": true
      }
    ],
    "reaction": {
      "id": "sse-portfolio-reaction",
      "reaction_type": "sse",
      "properties": {
        "host": "0.0.0.0",
        "port": 50052,
        "sse_path": "/events",
        "heartbeat_interval_ms": 10000
      },
      "auto_start": true
    }
  },
  "watchlist": {
    "name": "watchlist",
    "description": "Track specific stocks (FAANG) with separate queries for debugging",
    "server": "http://localhost:8080",
    "queries": [
      {
        "id": "watchlist-stocks-query",
        "query": "MATCH (s:stocks) WHERE s.symbol IN ['AAPL', 'MSFT', 'GOOGL', 'TSLA', 'NVDA'] RETURN s.symbol AS symbol, s.name AS name, s.sector AS sector",
        "sources": ["postgres-stocks"],
        "auto_start": true
      },
      {
        "id": "watchlist-prices-query",
        "query": "MATCH (sp:stock_prices) WHERE sp.symbol IN ['AAPL', 'MSFT', 'GOOGL', 'TSLA', 'NVDA'] RETURN sp.symbol AS symbol, sp.price AS price, sp.previous_close AS previous_close, sp.volume AS volume",
        "sources": ["price-feed"],
        "auto_start": true
      },
      {
        "id": "watchlist-joined-query",
        "query": "MATCH (s:stocks)-[:HAS_PRICE]->(sp:stock_prices) WHERE s.symbol IN ['AAPL', 'MSFT', 'GOOGL', 'TSLA', 'NVDA'] RETURN s.symbol AS symbol, s.name AS name, sp.price AS price",
        "sources": ["postgres-stocks", "price-feed"],
        "joins": [
          {
            "id": "HAS_PRICE",
            "keys": [
              { "label": "stocks", "property": "symbol" },
              { "label": "stock_prices", "property": "symbol" }
            ]
          }
        ],
        "auto_start": true
      }
    ],
    "reaction": {
      "id": "sse-watchlist-reaction",
      "reaction_type": "sse",
      "properties": {
        "host": "0.0.0.0",
        "port": 50053,
        "sse_path": "/events",
        "heartbeat_interval_ms": 10000
      },
      "auto_start": true
    }
  },
  "all": {
    "name": "all",
    "description": "Monitor all data streams",
    "server": "http://localhost:8080",
    "queries": [
      {
        "id": "all-stocks-query",
        "query": "MATCH (n) RETURN n",
        "sources": ["postgres-stocks", "price-feed"],
        "auto_start": true
      }
    ],
    "reaction": {
      "id": "sse-all-reaction",
      "reaction_type": "sse",
      "properties": {
        "host": "0.0.0.0",
        "port": 50054,
        "sse_path": "/events",
        "heartbeat_interval_ms": 30000
      },
      "auto_start": true
    }
  }
}